{"is_source_file": true, "format": "Python", "description": "This Python source file defines a class 'RecordsRepository' that provides data access methods for interacting with a 'records' table via Supabase. It supports CRUD operations, pagination, sorting, filtering, and searching within the table.", "external_files": ["...core.errors", "...core.logging", "..supabase_client"], "external_methods": ["get_client", "get_schema", "get_logger", "AppError", "NotFoundError"], "published": ["RecordsRepository"], "classes": [{"name": "RecordsRepository", "description": "Repository for interacting with the 'records' table via Supabase, supporting CRUD, filtering, sorting, and pagination."}], "methods": [{"name": "None __init__(self, table_name: Optional[str] = None, schema: Optional[str] = None)", "description": "Initializes the repository with optional table name and schema.", "scope": "RecordsRepository", "scopeKind": "class"}, {"name": "_table_query(self)", "description": "Constructs and returns the table query object, applying schema if supported.", "scope": "RecordsRepository", "scopeKind": "class"}, {"name": "_apply_filters(self, query, filters: Optional[Dict[str, Any]] = None, q: Optional[str] = None)", "description": "Applies filters and search query to the database query object.", "scope": "RecordsRepository", "scopeKind": "class"}, {"name": "Tuple[str,bool] _safe_sort(self, sort_by: str, sort_dir: str)", "description": "Validates the sort column and direction.", "scope": "RecordsRepository", "scopeKind": "class"}, {"name": "Tuple[List[Dict[str,Any]],int] list_records( self, page: int = 1, page_size: int = 20, sort_by: str = \"created_at\", sort_dir: str = \"desc\", q: Optional[str] = None, filters: Optional[Dict[str, Any]] = None, )", "description": "Retrieves a paginated list of records with optional filtering, sorting, and search.", "scope": "RecordsRepository", "scopeKind": "class"}, {"name": "Dict[str,Any] get_record_by_id(self, id: str)", "description": "Fetches a single record by ID, raising NotFoundError if not found.", "scope": "RecordsRepository", "scopeKind": "class"}, {"name": "Dict[str,Any] create_record(self, data: Dict[str, Any])", "description": "Creates a new record with the provided data.", "scope": "RecordsRepository", "scopeKind": "class"}, {"name": "Dict[str,Any] update_record(self, id: str, data: Dict[str, Any])", "description": "Updates an existing record identified by ID.", "scope": "RecordsRepository", "scopeKind": "class"}, {"name": "bool delete_record(self, id: str)", "description": "Deletes a record by ID, returning True if successful.", "scope": "RecordsRepository", "scopeKind": "class"}], "calls": ["get_client", "get_schema", "get_logger", "self._client.table", "logger.error", "self._client.table", "qb.schema", "qb.select", "qb.eq", "qb.or_", "qb.ilike", "qb.order", "qb.range", "qb.execute", "self.get_record_by_id", "self._table_query().insert", "self._table_query().update", "self._table_query().delete"], "search-terms": ["RecordsRepository", "supabase", "CRUD", "pagination", "sorting", "filtering", "search", "records table", "supabase_client", "FastAPI"], "state": 2, "file_id": 14, "knowledge_revision": 35, "git_revision": "", "ctags": [{"_type": "tag", "name": "RecordsRepository", "path": "/home/kavia/workspace/code-generation/supabase-data-access-api-5536-6800/fastapi_backend_agent/src/data/repositories/records_repository.py", "pattern": "/^class RecordsRepository:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/supabase-data-access-api-5536-6800/fastapi_backend_agent/src/data/repositories/records_repository.py", "pattern": "/^    def __init__(self, table_name: Optional[str] = None, schema: Optional[str] = None) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, table_name: Optional[str] = None, schema: Optional[str] = None)", "scope": "RecordsRepository", "scopeKind": "class"}, {"_type": "tag", "name": "_apply_filters", "path": "/home/kavia/workspace/code-generation/supabase-data-access-api-5536-6800/fastapi_backend_agent/src/data/repositories/records_repository.py", "pattern": "/^    def _apply_filters(self, query, filters: Optional[Dict[str, Any]] = None, q: Optional[str] =/", "language": "Python", "kind": "member", "signature": "(self, query, filters: Optional[Dict[str, Any]] = None, q: Optional[str] = None)", "scope": "RecordsRepository", "scopeKind": "class"}, {"_type": "tag", "name": "_safe_sort", "path": "/home/kavia/workspace/code-generation/supabase-data-access-api-5536-6800/fastapi_backend_agent/src/data/repositories/records_repository.py", "pattern": "/^    def _safe_sort(self, sort_by: str, sort_dir: str) -> Tuple[str, bool]:$/", "language": "Python", "typeref": "typename:Tuple[str,bool]", "kind": "member", "signature": "(self, sort_by: str, sort_dir: str)", "scope": "RecordsRepository", "scopeKind": "class"}, {"_type": "tag", "name": "_table_query", "path": "/home/kavia/workspace/code-generation/supabase-data-access-api-5536-6800/fastapi_backend_agent/src/data/repositories/records_repository.py", "pattern": "/^    def _table_query(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "RecordsRepository", "scopeKind": "class"}, {"_type": "tag", "name": "create_record", "path": "/home/kavia/workspace/code-generation/supabase-data-access-api-5536-6800/fastapi_backend_agent/src/data/repositories/records_repository.py", "pattern": "/^    def create_record(self, data: Dict[str, Any]) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "member", "signature": "(self, data: Dict[str, Any])", "scope": "RecordsRepository", "scopeKind": "class"}, {"_type": "tag", "name": "delete_record", "path": "/home/kavia/workspace/code-generation/supabase-data-access-api-5536-6800/fastapi_backend_agent/src/data/repositories/records_repository.py", "pattern": "/^    def delete_record(self, id: str) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "member", "signature": "(self, id: str)", "scope": "RecordsRepository", "scopeKind": "class"}, {"_type": "tag", "name": "get_record_by_id", "path": "/home/kavia/workspace/code-generation/supabase-data-access-api-5536-6800/fastapi_backend_agent/src/data/repositories/records_repository.py", "pattern": "/^    def get_record_by_id(self, id: str) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "member", "signature": "(self, id: str)", "scope": "RecordsRepository", "scopeKind": "class"}, {"_type": "tag", "name": "list_records", "path": "/home/kavia/workspace/code-generation/supabase-data-access-api-5536-6800/fastapi_backend_agent/src/data/repositories/records_repository.py", "pattern": "/^    def list_records($/", "language": "Python", "typeref": "typename:Tuple[List[Dict[str,Any]],int]", "kind": "member", "signature": "( self, page: int = 1, page_size: int = 20, sort_by: str = \"created_at\", sort_dir: str = \"desc\", q: Optional[str] = None, filters: Optional[Dict[str, Any]] = None, )", "scope": "RecordsRepository", "scopeKind": "class"}, {"_type": "tag", "name": "logger", "path": "/home/kavia/workspace/code-generation/supabase-data-access-api-5536-6800/fastapi_backend_agent/src/data/repositories/records_repository.py", "pattern": "/^logger = get_logger(__name__)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "update_record", "path": "/home/kavia/workspace/code-generation/supabase-data-access-api-5536-6800/fastapi_backend_agent/src/data/repositories/records_repository.py", "pattern": "/^    def update_record(self, id: str, data: Dict[str, Any]) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "member", "signature": "(self, id: str, data: Dict[str, Any])", "scope": "RecordsRepository", "scopeKind": "class"}], "hash": "f66b65af8dbd6888f80c3544d2963270", "format-version": 4, "code-base-name": "fastapi_backend_agent", "filename": "fastapi_backend_agent/src/data/repositories/records_repository.py", "fields": [{"name": "logger = get_logger(__name__)", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"35": ""}]}