{"is_source_file": true, "format": "Python", "description": "This file provides a singleton pattern implementation for managing a Supabase client connection, including functions to build, retrieve, reload, and close the client, with thread safety measures.", "external_files": ["../core/config", "../core/errors", "../core/logging"], "external_methods": ["supabase.create_client", "supabase.Client", "get_settings", "AppError", "get_logger"], "published": ["get_client", "get_schema", "reload_client", "close_client"], "classes": [], "methods": [{"name": "Client _build_client()", "description": "Creates a new Supabase Client instance using configuration settings, handling errors if configuration is incomplete or client creation fails.", "scope": "", "scopeKind": ""}, {"name": "Client get_client()", "description": "Returns a singleton Supabase Client instance, initializing it if necessary, ensuring thread safety.", "scope": "", "scopeKind": ""}, {"name": "str get_schema()", "description": "Returns the configured Postgres schema name, defaulting to 'public' if not set or if an error occurs.", "scope": "", "scopeKind": ""}, {"name": "None reload_client()", "description": "Rebuilds the singleton Supabase client with current settings, useful for dynamic environment changes or testing.", "scope": "", "scopeKind": ""}, {"name": "None close_client()", "description": "Nullifies the singleton client instance, allowing for garbage collection and recreation; it is a no-op for the current SDK which does not support explicit closing.", "scope": "", "scopeKind": ""}], "calls": ["get_settings", "create_client", "get_logger().error", "get_logger().info"], "search-terms": ["supabase_client", "singleton", "thread-safe", "Supabase client", "Python project"], "state": 2, "file_id": 12, "knowledge_revision": 32, "git_revision": "", "ctags": [{"_type": "tag", "name": "_build_client", "path": "/home/kavia/workspace/code-generation/supabase-data-access-api-5536-6800/fastapi_backend_agent/src/data/supabase_client.py", "pattern": "/^def _build_client() -> Client:$/", "language": "Python", "typeref": "typename:Client", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_client", "path": "/home/kavia/workspace/code-generation/supabase-data-access-api-5536-6800/fastapi_backend_agent/src/data/supabase_client.py", "pattern": "/^_client: Optional[Client] = None$/", "language": "Python", "typeref": "typename:Optional[Client]", "kind": "variable"}, {"_type": "tag", "name": "_client_schema", "path": "/home/kavia/workspace/code-generation/supabase-data-access-api-5536-6800/fastapi_backend_agent/src/data/supabase_client.py", "pattern": "/^_client_schema: Optional[str] = None  # track schema used to allow reload on change$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable"}, {"_type": "tag", "name": "_lock", "path": "/home/kavia/workspace/code-generation/supabase-data-access-api-5536-6800/fastapi_backend_agent/src/data/supabase_client.py", "pattern": "/^_lock = threading.RLock()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_logger", "path": "/home/kavia/workspace/code-generation/supabase-data-access-api-5536-6800/fastapi_backend_agent/src/data/supabase_client.py", "pattern": "/^_logger = get_logger(__name__)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "close_client", "path": "/home/kavia/workspace/code-generation/supabase-data-access-api-5536-6800/fastapi_backend_agent/src/data/supabase_client.py", "pattern": "/^def close_client() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "get_client", "path": "/home/kavia/workspace/code-generation/supabase-data-access-api-5536-6800/fastapi_backend_agent/src/data/supabase_client.py", "pattern": "/^def get_client() -> Client:$/", "language": "Python", "typeref": "typename:Client", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "get_schema", "path": "/home/kavia/workspace/code-generation/supabase-data-access-api-5536-6800/fastapi_backend_agent/src/data/supabase_client.py", "pattern": "/^def get_schema() -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "reload_client", "path": "/home/kavia/workspace/code-generation/supabase-data-access-api-5536-6800/fastapi_backend_agent/src/data/supabase_client.py", "pattern": "/^def reload_client() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}], "hash": "1391e3c7e79503cbcafbc037975892c2", "format-version": 4, "code-base-name": "fastapi_backend_agent", "filename": "fastapi_backend_agent/src/data/supabase_client.py", "fields": [{"name": "Optional[Client] _client", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[str] _client_schema", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "_lock = threading.RLock()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "_logger = get_logger(__name__)", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"32": ""}]}